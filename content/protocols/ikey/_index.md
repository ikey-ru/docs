---
title: "iKey протокол"
date: 2019-12-24
draft: false
pre: "<i class='fa fa-exchange'>&nbsp;</i> "
weight: 1
---
#### Оглавление
1. [Общая характеристика устройства](#общая-характеристика-устройства)
2. [Поддерживаемые типы ключей](#поддерживаемые-типы-ключей)
3. Получение статуса устройства
4. Передача на устройство коротких ключей (менее 8 байт)
5. Передача на устройство длинных кодов ключей (более 8 байт, протокольное расширение Overdrive)
6. Выгрузка дампа с устройства (на примере дампа ds1996)
7. Установка параметров эмуляции ключей Cyfral, Metakom, Dallas
8. Обновление прошивки iKey

##### Общая характеристика устройства
Устройство iKey является устройством универсального ключа, работающим в паре с мобильным устройством. iKey подключается к мобильному устройству посредством Bluetooth (BLE) и с помощью клиента, установленного на мобильное устройство, в iKey можно передать на эмуляцию коды ключей. iKey предоставляет следующие сервисы Bluetooth:

1. **Generic Access** (UUID 0x1800) - не используется, 0x1800@0x2A00 = iKey
2. **Generic Attribute** (UUID 0x1801) - не используется
3. **Device Information** (UUID 0x180A) - не используется, 0x180A@0x2A29 = iKey LLC
4. **Battery service** (UUID 0x180F):
	* 0x180F@0x2A19 {READ}: процент заряда устройства, байт, целочисленное, значение от 0 до 100
	* 0x180F@0000FFF3-0000-1000-8000-00805F9B34FB {READ}: статус зарядки устройства, байт: **0x00** - устройство не заряжается, **0x01** - устройство заряжается
5. **Device communication service** (UUID 0x0000FFF0-0000-1000-8000-00805F9B34FB):
	* 0x0000FFF0-0000-1000-8000-00805F9B34FB@0x0000FFF1-0000-1000-8000-00805F9B34FB {WRITE NO RESPONSE}: характеристика для передачи протокольных команд на устройство
	* 0x0000FFF0-0000-1000-8000-00805F9B34FB@0x0000FFF2-0000-1000-8000-00805F9B34FB {NOTIFY, READ}: характеристика для передачи протокольных команд с устройства (посредством уведомлений)
6. **Device mode service** (UUID 0x0000FFF4-0000-1000-8000-00805F9B34FB):
	* 0x0000FFF4-0000-1000-8000-00805F9B34FB@0x0000FFF5-0000-1000-8000-00805F9B34FB {READ, WRITE NO RESPONSE}: характеристика для чтения\записи текущего режима устройства, **0x00** - ЦПУ ВЫКЛ, **0x01** - ЦПУ ВКЛ, **0x03** - режим загрузчика

[Вернуться к оглавлению ^](#оглавление)

##### Поддерживаемые типы ключей
К примеру, ссылка на [Dallas](/docs/keys/#dallas)
